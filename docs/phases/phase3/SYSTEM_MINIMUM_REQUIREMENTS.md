# システム最低要件

## 概要

sebas-chanが「安全なフォーゲッタ」として機能するために必要な最低限の要件を定義します。ワークフロー設計の検証結果に基づいて、必須要件と実装状況を明確にします。

## 必須要件（MUST HAVE）

### 1. データ永続化と検索

#### 要件
- すべての入力情報を失わずに保存
- 後から必要な情報を検索・取得可能
- ベクトル検索による意味的な関連性の発見

#### 実装状況 ✅
- **Pond (LanceDB)**: ベクトルDB実装済み
- **A-1 (INGEST_INPUT)**: 全入力の永続化ワークフロー設計済み
- **日本語対応**: ruri-v3モデル（256次元）導入済み

### 2. 自然言語処理

#### 要件
- ユーザーの自然な表現を理解
- 曖昧な指示を構造化された情報に変換
- 文脈を考慮した解釈

#### 実装状況 ✅
- **Moduler Prompt統合**: AI処理フレームワーク準備済み
- **A-0 (PROCESS_USER_REQUEST)**: 自然言語解釈ワークフロー設計済み
- **format(schema)**: 構造化出力の仕様策定済み

### 3. タスク管理

#### 要件
- Issue（個別タスク）の作成・更新・削除
- Flow（タスク群）による階層管理
- 優先度と締切の管理

#### 実装状況 ✅
- **データモデル**: Issue/Flow/Knowledge定義済み
- **WorkflowContext**: DB操作インターフェース実装済み
- **優先度システム**: -100〜100のスケール設計済み

### 4. イベント駆動処理

#### 要件
- 非同期でのイベント処理
- 優先度に基づく実行順序制御
- エラー時の分離と継続性

#### 実装状況 ✅
- **EventEmitter**: イベントシステム実装済み
- **WorkflowResolver**: ワークフロー解決機構実装済み
- **WorkflowQueue**: 優先度キュー実装済み

### 5. 学習と改善

#### 要件
- 過去の経験から知識を抽出
- パターン認識による自動化
- ユーザー行動の学習

#### 実装状況 ✅
- **A-3 (EXTRACT_KNOWLEDGE)**: 知識抽出ワークフロー設計済み
- **B-1 (CLUSTER_ISSUES)**: パターン認識ワークフロー設計済み
- **Knowledge reputation**: 評価システム設計済み

## 重要要件（SHOULD HAVE）

### 1. ユーザー支援

#### 要件
- 次の行動の提案
- 具体的なアクションへの変換
- 適切なタイミングでの通知

#### 実装状況 ⚠️
- **C-1/C-2**: 提案ワークフロー設計済み ✅
- **通知機能**: 未実装（Reporter経由で実装予定）❌

### 2. 外部連携

#### 要件
- メール、カレンダー等との連携
- Webhook対応
- API提供

#### 実装状況 ⚠️
- **Reporter SDK**: 基盤実装済み ✅
- **Gmail Reporter**: 部分実装 ⚠️
- **カレンダー連携**: 未実装 ❌

### 3. 時間管理

#### 要件
- 自然言語の日時表現解釈
- タイムゾーン対応
- リマインダー機能

#### 実装状況 ❌
- **日時解釈**: Moduler Promptで対応予定
- **リマインダー**: ワークフロー設計で対応予定

## 補完要件（NICE TO HAVE）

### 1. 可視化

#### 要件
- ダッシュボード
- 統計レポート
- ワークフロー実行の可視化

#### 実装状況 ⚠️
- **Web UI**: 基本UI実装済み ✅
- **Pond検索UI**: 実装済み ✅
- **ダッシュボード**: 未実装 ❌

### 2. 高度な最適化

#### 要件
- 動的な並列実行調整
- リソース使用量の最適化
- 大規模データ対応

#### 実装状況 ❌
- 基本的な並列実行のみ実装

## 実装チェックリスト

### Phase 1: 最低要件の完成（現在）

- [x] Pond（ベクトルDB）
- [x] 基本データモデル（Issue/Flow/Knowledge）
- [x] イベントシステム
- [x] WorkflowResolver/Queue
- [x] Moduler Prompt統合準備
- [ ] **A-0〜A-3ワークフローの実装** ← 次のステップ
- [ ] 基本的なテスト

### Phase 2: 実用性の向上

- [ ] B系ワークフローの実装
- [ ] C系ワークフローの実装
- [ ] 時間認識機能
- [ ] 通知機能
- [ ] Reporter強化

### Phase 3: 拡張性の確保

- [ ] 外部API連携
- [ ] ダッシュボード
- [ ] パフォーマンス最適化
- [ ] スケーラビリティ対応

## 判定結果

### 最低要件の充足状況

```
必須要件（MUST HAVE）
├─ データ永続化と検索    ✅ 実装済み
├─ 自然言語処理         ✅ 設計済み（実装待ち）
├─ タスク管理          ✅ 基盤実装済み
├─ イベント駆動処理     ✅ 実装済み
└─ 学習と改善          ✅ 設計済み（実装待ち）

判定: 基盤は整備済み、ワークフロー実装で完成
```

### 次のアクション

1. **即座に実施**
   - A-0〜A-3ワークフローの実装
   - 基本的な統合テスト

2. **続いて実施**
   - B-1, B-3ワークフローの実装
   - C-1, C-2ワークフローの実装

3. **段階的に追加**
   - 時間認識機能
   - 外部連携強化
   - UI/UXの改善

## まとめ

システムの最低要件は、現在の設計で十分に満たすことができます。基盤となるインフラストラクチャは既に実装済みで、残るはワークフローの実装のみです。

**結論: ワークフロー実装フェーズへの移行準備完了 ✅**