# **AIエージェントシステム 設計仕様書 (最終版)**

## **1\. 概要**

### **1.1. コンセプト: "安全なフォーゲッタ"**

本システムは、ユーザーが安心して情報を\*\*「忘れる」\*\*ことを可能にするAIエージェントである。ユーザーの認知的な負荷をAIが肩代わりし、「今、集中すべきこと」に専念できる環境を提供する。AIは受動的なリマインダーではなく、ユーザーの外部脳として能動的に情報を管理し、最適なタイミングで対話を行う思考パートナーとして振る舞う。

### **1.2. 設計思想**

* **内部構造の隠蔽:** ユーザーは、Issue, Flow, Pondといったシステムの内部概念を一切意識しない。全てのインタラクションは自然言語によって行われる。  
* **ユーザー主権:** AIによる自動化は支援に徹し、最終的な判断や訂正の権利は常にユーザーが持つ。  
* **疎結合と拡張性:** システムの各コンポーネントは明確に分離され、将来的な機能追加やインターフェースの変更が容易な設計とする。

### **1.3. 設計上の前提とスコープ**

本システムが扱う問題の範囲は、「一人の人間の生活や仕事」に限定される。この前提により、管理対象となるデータ規模には現実的な上限が存在する。

* **Flow:** 同時にアクティブなフローは、数千になることはなく、**数十のレベル**に収まる。  
* **Issue:** ユーザーが1日に関わるアクティブなIssueは、**数百を超えることは稀**である。 この制約により、AIの思考ループは計算量的に破綻することなく、複雑な関係性の分析と最適化にリソースを集中できる。

## **2\. システムアーキテクチャ**

本システムは、全ての思考ロジックとデータストアを含む**内部コア**と、外部クライアントとの通信を担う**MCPサーバー**から構成される。

### **2.1. 全体構成**

`graph TD`  
    `subgraph Core System (Private & Internal Blackbox)`  
        `A[Core Agent (思考ループ)]`  
        `L[Internal Logic (Flow, Pond, Knowledge管理)]`  
        `DS[Data Stores (Issues, Pond, etc.)]`  
        `R[Reporters]`  
        `MCP_S[MCP Server]`  
    `end`

    `subgraph External MCP Clients (Interchangeable)`  
        `C1[CLI / Debug UI]`  
        `C2[Future Custom Web UI]`  
        `C3[Other AI Agents]`  
    `end`

    `R -- Input --> A`  
    `A <--> L`  
    `L <--> DS`

    `A -- "対話が必要" --> MCP_S`

    `C1 -- MCP --> MCP_S`  
    `C2 -- MCP --> MCP_S`  
    `C3 -- MCP --> MCP_S`

### **2.2. コンポーネント**

* **内部コア (Internal Core):** システムの心臓部。思考、ロジック、データ、情報収集の全てを内包する。  
* **MCPサーバー (MCP Server):** 唯一の公開インターフェース。「思考バックエンドサービス」として、標準化されたプロトコル(MCP)で機能を提供する。  
* **MCPクライアント (MCP Clients):** MCPサーバーを利用する外部ツール。クライアント側が応答性や対話UXを担保する。

## **3\. MCP (Model Context Protocol)**

コアエージェントと外部クライアントが通信するための、JSONベースの標準規約。クライアントAIは、MCPが提供する自己記述スキーマ（説明書）を読むことで、サーバーの機能（ツール）を動的に理解し、利用することができる。

## **4\. 情報管理モデル**

### **4.1. 情報階層: Input → Issue → Knowledge**

* **Input (入力):** レポータから送られてくる情報の最小単位。  
* **Issue (課題):** Inputが統合された、行動可能な管理単位。GitHubのIssueのように、**openとcloseのシンプルな状態を持ち、詳細はラベルによって管理される**。状態の複雑性はFlowのロジック側で吸収する。  
* **Knowledge (知識):** ClosedになったIssueから抽出・蒸留された、永続的な知識。各Knowledgeには、システムの自動モデレートによる\*\*価値スコア（+1: 有用, 0: 不明/中立, \-1: 不正確/陳腐化）\*\*が付与され、検索や提案の際の重み付けに利用される。

### **4.2. Pond: 未整理情報のストア**

どのFlowにも属さないが、将来価値を持つ可能性のあるInputが投入される、巨大なベクトル化された情報ストア。セレンディピティ（偶発的な発見）の源泉となる。

## **5\. 思考モデル**

### **5.1. フローの動的オーケストレーション**

コアエージェントは、個々のIssueを点としてではなく、複数の並行する\*\*「フロー」\*\*として認識・管理する。AIの役割は、依存関係やボトルネックを解決し、ユーザーの仕事の流れ全体を最適化することにある。

### **5.2. 評価ベクトル**

IssueやFlowの価値は、「即時性」「重要性」「影響力」の多角的なベクトルで動的に評価される。

### **5.3. 高度な思考ロジック**

* **優先度継承:** あるIssueが、より重要なIssueのブロッカーとなっている場合、そのIssueの優先度は一時的に引き上げられる。  
* **非対称フィードバック:** ユーザーの「無視」はフィードバックと見なさず、「能動的なアクション」のみを学習データとして利用することで、過学習を防ぐ。  
* **自己タスクのIssue化:** AIは、ユーザーに確認が必要な事項などを、自身のタスクとしてメタIssue（例：「金曜日に確認事項をまとめて聞く」）を生成することで、特別な仕組みなしに自己の思考プロセスを管理する。

### **5.4. Pondからの情報サルベージ**

AIによる自動的なクラスタリングや、ユーザーが定義した「サルベージプラン」に基づき、Pondから価値ある情報を定期的に引き出す。

## **6\. ユーザーエクスペリエンス**

### **6.1. 対話の原則**

ユーザーとの対話は、常に自然言語で行われる。エージェントは、ユーザーの曖昧な目標を具体的な計画へと分解する**対話パートナー**として振る舞う。

### **6.2. 状態変更のインターフェース**

* **読み取り (Query):** クライアントは、対話に必要なIssueやFlowの情報を直接読み取ることができる。  
* **書き込み (Request):** 全ての状態変更は、ユーザーの自然言語を含む「更新リクエスト」としてコアエージェントに依頼され、直接的な書き込みは許可されない。